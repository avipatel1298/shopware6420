!function(n){var e={};function t(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return n[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=n,t.c=e,t.d=function(n,e,i){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:i})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(i,r,function(e){return n[e]}.bind(null,r));return i},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="/bundles/flinkquickview/",t(t.s="Dv8h")}({"1pIO":function(n,e,t){},"6YfH":function(n,e,t){var i=t("1pIO");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);(0,t("SZ7m").default)("d35104f4",i,!0,{})},ABGw:function(n){n.exports=JSON.parse('{"flink-dashboard":{"title":"FlinkFactory Plugin Settings","menuItem":"FlinkFactory Plugins","cardFlinkFeed":"These plugins might interest you","toPluginsLinkText":"To our plugins","daysLeft":"Only {days} days left!","discount":"Discount","exlusiveVoucher":"Exclusive discount code"}}')},DQXO:function(n,e){n.exports='{% block flink_dashboard_overview %}\r\n<sw-page class="flink-dashboard-overview" id="flinkDashboard">\r\n    {% block flink_dashboard_overview_header %}\r\n        <template #smart-bar-back>\r\n            <router-link v-if="parentRoute"\r\n                         class="smart-bar__back-btn"\r\n                         :to="{ name: parentRoute }"\r\n                         :style="{ \'color\': \'#71d3ad\' }">\r\n                <sw-icon name="default-arrow-head-left" small></sw-icon>\r\n                <sw-icon name="default-action-settings" small></sw-icon>\r\n            </router-link>\r\n        </template>\r\n        <template #smart-bar-header>\r\n            <h2>{{ $tc(\'flink-dashboard.title\') }}</h2>\r\n        </template>\r\n    {% endblock %}\r\n\r\n    <template #content>\r\n\r\n        <div v-if="flinkFeed.discount">\r\n            <div v-if="flinkFeed.discount.type == \'sale\' && flinkFeed.discount.daysLeft > -1" class="flink-global-sale">\r\n                <strong class="flink-dashboard-badge">{{ flinkFeed.discount.value }}</strong>\r\n                <strong>{{ flinkFeed.discount.label[locale] }}</strong> - {{ $tc(\'flink-dashboard.daysLeft\', 0, { days: flinkFeed.discount.daysLeft }) }}\r\n                <sw-button :link="flinkFeed.url[locale]" :title="$tc(\'flink-dashboard.toPluginsLinkText\')" size="small" variant="ghost">{{ $tc(\'flink-dashboard.toPluginsLinkText\') }}</sw-button>\r\n            </div>\r\n            <div v-else-if="flinkFeed.discount.type == \'voucher\'" class="flink-global-voucher">\r\n                <strong class="flink-dashboard-badge">CODE: {{ flinkFeed.discount.code }}</strong>\r\n                <strong>{{ flinkFeed.discount.label[locale] }}</strong>\r\n                <sw-button :link="flinkFeed.url[locale]" :title="$tc(\'flink-dashboard.toPluginsLinkText\')" size="small" variant="ghost">{{ $tc(\'flink-dashboard.toPluginsLinkText\') }}</sw-button>\r\n            </div>\r\n        </div>\r\n\r\n        {% block flink_dashboard_overview_content %}\r\n\r\n            <div :style="{\'display\': !displayPlugins.length ? \'none\' : \'\'}" class="flink-feed-plugin-showcase">\r\n\r\n                <div class="flink-feed-plugin-showcase--left">\r\n                    <span>{{ $t(\'flink-dashboard.cardFlinkFeed\') }}:</span>\r\n                </div>\r\n\r\n                <div class="flink-feed-plugin-showcase--main" ref="pluginShowcaseMain">\r\n                    <div class="flink-feed-plugins">\r\n                        <a :href="plugin.url[locale]" target="_blank" rel="noopener" v-for="plugin in displayPlugins" class="flink-feed-plugin">\r\n                            <div class="flink-feed-plugin-top">\r\n                                <div class="flink-feed-plugin-icon"><img :src="plugin.icon" :alt="plugin.title[\'de-DE\']"></div>\r\n                                <div class="flink-feed-plugin-title"><strong>{{ plugin.title[locale] }}</strong></div>\r\n                            </div>\r\n                            <div class="flink-feed-plugin-description">\r\n                                {{ plugin.description[locale] }}\r\n                                <div v-if="plugin.discount" class="flink-feed-plugin-discount" :class="\'flink-feed-plugin-discount-\' + plugin.discount.type">\r\n                                    <template v-if="plugin.discount.type == \'sale\'">\r\n                                        <strong>{{ plugin.discount.value }} {{ $tc(\'flink-dashboard.discount\') }}</strong> -\r\n                                        <template v-if="plugin.discount.daysLeft == 1">\r\n                                            {{ $tc(\'flink-dashboard.dayLeft\') }}\r\n                                        </template>\r\n                                        <template v-else>\r\n                                            {{ $tc(\'flink-dashboard.daysLeft\', 0, {days: plugin.discount.daysLeft}) }}\r\n                                        </template>\r\n                                    </template>\r\n                                    <template v-else-if="plugin.discount.type == \'voucher\'">\r\n                                        <strong>{{ plugin.discount.value }} {{ $tc(\'flink-dashboard.discount\') }}</strong> - {{ $tc(\'flink-dashboard.exlusiveVoucher\') }}: {{ plugin.discount.code }}\r\n                                    </template>\r\n                                </div>\r\n                            </div>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div class="flink-dashboard-config" v-if="activeFlinkPlugins.length">\r\n                {% block flink_dashboard_overview_plugins %}\r\n                    <sw-tabs class="flink-dashboard-config-tabs" :defaultItem="defaultConfigPlugin">\r\n                        <template #default="{ active }">\r\n                            <sw-tabs-item\r\n                                    v-for="plugin in activeFlinkPlugins"\r\n                                    :name="plugin.name"\r\n                                    :title="plugin.label"\r\n                                    :activeTab="active">\r\n                                {{ plugin.name }}\r\n                            </sw-tabs-item>\r\n                        </template>\r\n\r\n                        <template #content="{ active }">\r\n                            {% block link_dashboard_sw_system_config %}\r\n                                <template v-for="plugin in activeFlinkPlugins">\r\n                                    <div :style="{ \'display\': plugin.name == active ? \'\' : \'none\' }">\r\n\r\n                                        <div class="flink-dashboard-config-buttons">\r\n                                            <img v-if="plugin.icon" :src="\'data:image/png;base64, \' + plugin.icon" :alt="plugin.name">\r\n                                            <div class="flink-dashboard-config-plugin-info">\r\n                                                <strong>{{ plugin.label }}</strong><br>\r\n                                                {{ plugin.description }}\r\n                                            </div>\r\n                                            <sw-button variant="primary" class="flink-dashboard-config-save" @click.prevent="onSave(plugin.name)">\r\n                                                {{ $tc(\'global.default.save\') }}\r\n                                            </sw-button>\r\n                                        </div>\r\n\r\n                                        <sw-system-config\r\n                                                :domain="plugin.name + \'.config\'"\r\n                                                salesChannelSwitchable\r\n                                                :ref="\'systemConfig_\' + plugin.name">\r\n                                        </sw-system-config>\r\n\r\n                                    </div>\r\n                                </template>\r\n                            {% endblock %}\r\n                        </template>\r\n\r\n                    </sw-tabs>\r\n                {% endblock %}\r\n            </div>\r\n        {% endblock %}\r\n    </template>\r\n</sw-page>\r\n{% endblock %}'},Dv8h:function(n,e,t){"use strict";t.r(e);var i=t("mijN"),r=t("ABGw"),a=t("DQXO"),s=t.n(a),l=(t("6YfH"),Shopware),o=l.Component,d=l.Mixin,u=Shopware.Data.Criteria;o.register("flink-dashboard-overview",{template:s.a,inject:["repositoryFactory"],mixins:[d.getByName("notification")],data:function(){return{activeFlinkPlugins:[],displayPlugins:[],flinkFeed:{}}},computed:{pluginRepository:function(){return this.repositoryFactory.create("plugin")},locale:function(){var n=this.flinkFeed.locales||["de-DE","en-GB"],e=this.$root.$i18n.locale;return n.indexOf(e)>-1?this.$root.$i18n.locale:"en-GB"},defaultConfigPlugin:function(){var n=this.activeFlinkPlugins.map((function(n){return n.name})),e=this.$root.$route.params.namespace;return e&&n.indexOf(e)>-1?e:this.activeFlinkPlugins[0]?this.activeFlinkPlugins[0].name:""},parentRoute:function(){return this.$root.$route.params.namespace?"sw.plugin.index":"sw.settings.index"}},created:function(){this.$root.$route.params.namespace&&(this.$route.meta.parentPath="sw.plugin.index"),this.loadActiveFlinkPlugins()},mounted:function(){},methods:{loadActiveFlinkPlugins:function(){var n=this,e=new u;e.addFilter(u.multi("AND",[u.contains("plugin.name","flink"),u.equals("active",1)])),this.pluginRepository.search(e,Shopware.Context.api).then((function(e){n.activeFlinkPlugins=e,n.loadFlinkFeed()}))},loadFlinkFeed:function(){var n=this;fetch("http://flinkfactory.com/flinkfeed.json").then((function(n){return n.json()})).then((function(e){if(n.flinkFeed=e,n.flinkFeed.plugins){var t=n.activeFlinkPlugins.map((function(n){return n.name}));n.displayPlugins=n.flinkFeed.plugins.filter((function(n){return-1===t.indexOf(n.name)}))}n.addEventListeners()}))},addEventListeners:function(){var n=document.getElementById("flinkDashboard"),e=this.$refs.pluginShowcaseMain;e.addEventListener("mousemove",(function(t){var i=t.clientX-e.offsetLeft-n.offsetLeft,r=e.offsetWidth,a=i/r,s=e.scrollWidth-r;e.scrollLeft=a*s}))},onSave:function(n){var e=this;this.$refs["systemConfig_"+n][0].saveAll().then((function(){e.createNotificationSuccess({message:e.$tc("sw-plugin-config.messageSaveSuccess")})})).catch((function(n){e.createNotificationError({message:n})}))}}});t("b3AQ");Shopware.Locale.extend("de-DE",i),Shopware.Locale.extend("en-GB",r),Shopware.Module.register("flink-dashboard",{type:"plugin",name:"flink-dashboard",title:"flink-dashboard.title",color:"#71d3ad",icon:"default-web-dashboard",routes:{overview:{component:"flink-dashboard-overview",path:"overview"}},settingsItem:[{group:"plugins",to:"flink.dashboard.overview",icon:"default-web-dashboard",label:"flink-dashboard.menuItem"}]})},SZ7m:function(n,e,t){"use strict";function i(n,e){for(var t=[],i={},r=0;r<e.length;r++){var a=e[r],s=a[0],l={id:n+":"+r,css:a[1],media:a[2],sourceMap:a[3]};i[s]?i[s].parts.push(l):t.push(i[s]={id:s,parts:[l]})}return t}t.r(e),t.d(e,"default",(function(){return g}));var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},s=r&&(document.head||document.getElementsByTagName("head")[0]),l=null,o=0,d=!1,u=function(){},c=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(n,e,t,r){d=t,c=r||{};var s=i(n,e);return v(s),function(e){for(var t=[],r=0;r<s.length;r++){var l=s[r];(o=a[l.id]).refs--,t.push(o)}e?v(s=i(n,e)):s=[];for(r=0;r<t.length;r++){var o;if(0===(o=t[r]).refs){for(var d=0;d<o.parts.length;d++)o.parts[d]();delete a[o.id]}}}}function v(n){for(var e=0;e<n.length;e++){var t=n[e],i=a[t.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](t.parts[r]);for(;r<t.parts.length;r++)i.parts.push(m(t.parts[r]));i.parts.length>t.parts.length&&(i.parts.length=t.parts.length)}else{var s=[];for(r=0;r<t.parts.length;r++)s.push(m(t.parts[r]));a[t.id]={id:t.id,refs:1,parts:s}}}}function h(){var n=document.createElement("style");return n.type="text/css",s.appendChild(n),n}function m(n){var e,t,i=document.querySelector("style["+f+'~="'+n.id+'"]');if(i){if(d)return u;i.parentNode.removeChild(i)}if(p){var r=o++;i=l||(l=h()),e=y.bind(null,i,r,!1),t=y.bind(null,i,r,!0)}else i=h(),e=w.bind(null,i),t=function(){i.parentNode.removeChild(i)};return e(n),function(i){if(i){if(i.css===n.css&&i.media===n.media&&i.sourceMap===n.sourceMap)return;e(n=i)}else t()}}var k,b=(k=[],function(n,e){return k[n]=e,k.filter(Boolean).join("\n")});function y(n,e,t,i){var r=t?"":i.css;if(n.styleSheet)n.styleSheet.cssText=b(e,r);else{var a=document.createTextNode(r),s=n.childNodes;s[e]&&n.removeChild(s[e]),s.length?n.insertBefore(a,s[e]):n.appendChild(a)}}function w(n,e){var t=e.css,i=e.media,r=e.sourceMap;if(i&&n.setAttribute("media",i),c.ssrId&&n.setAttribute(f,e.id),r&&(t+="\n/*# sourceURL="+r.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},b3AQ:function(n,e){var t=Shopware;t.Application;t.Component.override("sw-plugin-list",{methods:{onPluginSettings:function(n){0===n.name.indexOf("Flink")?this.$router.push({name:"flink.dashboard.overview",params:{namespace:n.name}}):this.$router.push({name:"sw.plugin.settings",params:{namespace:n.name}})}}})},mijN:function(n){n.exports=JSON.parse('{"flink-dashboard":{"title":"FlinkFactory Plugin-Einstellungen","menuItem":"FlinkFactory Plugins","cardFlinkFeed":"Diese Plugins könnten dich interessieren","toPluginsLinkText":"Zu unseren Plugins","dayLeft":"Nur noch bis morgen!","daysLeft":"Nur noch für {days} Tage!","discount":"Rabatt","exlusiveVoucher":"Exklusiver Gutscheincode"}}')}});
//# sourceMappingURL=flink-quick-view.js.map